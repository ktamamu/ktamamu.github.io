<?xml version="1.0" encoding="UTF-8"?>
<svg width="500" height="400" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="500" height="400" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="250" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">新しい構成：DNS委任</text>
  
  <!-- On-premises Environment -->
  <rect x="20" y="50" width="220" height="330" rx="8" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="130" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">🏢 オンプレミス環境</text>
  
  <!-- Client -->
  <rect x="40" y="85" width="180" height="40" rx="6" fill="white" stroke="#6c757d" stroke-width="1"/>
  <text x="130" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">クライアント</text>
  <text x="130" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.1.1.100</text>
  
  <!-- Arrow down -->
  <path d="M130 135 L130 155" stroke="#007bff" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
  <text x="140" y="150" font-family="Arial, sans-serif" font-size="10" fill="#007bff">DNS Query</text>
  
  <!-- Resolver DNS Server -->
  <rect x="40" y="165" width="180" height="55" rx="6" fill="#e3f2fd" stroke="#007bff" stroke-width="1"/>
  <text x="130" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">リゾルバーDNSサーバー</text>
  <text x="130" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.1.1.3</text>
  <rect x="60" y="200" width="140" height="15" rx="3" fill="#fff3cd" stroke="#ffeaa7" stroke-width="1"/>
  <text x="130" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#333">シンプルな転送設定</text>
  
  <!-- Arrow down -->
  <path d="M130 230 L130 250" stroke="#007bff" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
  <text x="140" y="245" font-family="Arial, sans-serif" font-size="10" fill="#007bff">Forward</text>
  
  <!-- Authority DNS Server -->
  <rect x="40" y="260" width="180" height="55" rx="6" fill="#e3f2fd" stroke="#007bff" stroke-width="1"/>
  <text x="130" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">権威DNSサーバー</text>
  <text x="130" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.1.1.2</text>
  <rect x="60" y="295" width="140" height="15" rx="3" fill="#fff3cd" stroke="#ffeaa7" stroke-width="1"/>
  <text x="130" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#333">委任設定あり</text>
  
  <!-- Delegation config -->
  <rect x="40" y="325" width="180" height="40" rx="6" fill="#f6f8fa" stroke="#d0d7de" stroke-width="1"/>
  <text x="130" y="340" text-anchor="middle" font-family="monospace" font-size="9" fill="#333">delegate-test IN NS ns1.delegate-test</text>
  <text x="130" y="355" text-anchor="middle" font-family="monospace" font-size="9" fill="#333">ns1.delegate-test IN A 10.128.130.26</text>
  
  <!-- Arrow right -->
  <path d="M250 280 L270 280" stroke="#28a745" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <text x="260" y="275" font-family="Arial, sans-serif" font-size="10" fill="#28a745">委任</text>
  
  <!-- AWS VPC Environment -->
  <rect x="280" y="50" width="200" height="330" rx="8" fill="#fff3cd" stroke="#ff9500" stroke-width="2"/>
  <text x="380" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">☁️ AWS VPC</text>
  
  <!-- Route 53 Inbound Endpoint -->
  <rect x="300" y="260" width="160" height="55" rx="6" fill="#fff3cd" stroke="#ff9500" stroke-width="1"/>
  <text x="380" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">Route 53</text>
  <text x="380" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">インバウンドエンドポイント</text>
  <text x="380" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.128.130.26</text>
  
  <!-- Arrow down -->
  <path d="M380 325 L380 345" stroke="#ff9500" stroke-width="2" marker-end="url(#arrowhead-orange)"/>
  
  <!-- Route 53 Private Hosted Zone -->
  <rect x="300" y="355" width="160" height="40" rx="6" fill="#fff3cd" stroke="#ff9500" stroke-width="1"/>
  <text x="380" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">Route 53 プライベートホストゾーン</text>
  <text x="380" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">delegate-test.intra.example.com</text>
  
  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#007bff"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#28a745"/>
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ff9500"/>
    </marker>
  </defs>
</svg>