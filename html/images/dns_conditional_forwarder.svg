<?xml version="1.0" encoding="UTF-8"?>
<svg width="500" height="350" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="500" height="350" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="250" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">従来の構成：条件付きフォワーダー</text>

  <!-- On-premises Environment -->
  <rect x="20" y="50" width="220" height="280" rx="8" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="130" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">🏢 オンプレミス環境</text>

  <!-- Client -->
  <rect x="40" y="85" width="180" height="40" rx="6" fill="white" stroke="#6c757d" stroke-width="1"/>
  <text x="130" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">クライアント</text>
  <text x="130" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.1.1.100</text>

  <!-- Arrow down -->
  <path d="M130 135 L130 155" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="140" y="150" font-family="Arial, sans-serif" font-size="10" fill="#dc3545">DNS Query</text>

  <!-- Resolver DNS Server -->
  <rect x="40" y="165" width="180" height="55" rx="6" fill="#e3f2fd" stroke="#007bff" stroke-width="1"/>
  <text x="130" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">リゾルバーDNSサーバー</text>
  <text x="130" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.1.1.3</text>
  <rect x="60" y="200" width="140" height="15" rx="3" fill="#fff3cd" stroke="#ffeaa7" stroke-width="1"/>
  <text x="130" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#333">条件付きフォワーダー設定</text>

  <!-- Authority DNS Server -->
  <rect x="40" y="235" width="180" height="40" rx="6" fill="#e3f2fd" stroke="#007bff" stroke-width="1"/>
  <text x="130" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">権威DNSサーバー</text>
  <text x="130" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.1.1.2</text>

  <!-- Arrow right -->
  <path d="M250 180 L270 180" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="260" y="175" font-family="Arial, sans-serif" font-size="10" fill="#dc3545">転送</text>

  <!-- AWS VPC Environment -->
  <rect x="280" y="50" width="200" height="280" rx="8" fill="#fff3cd" stroke="#ff9500" stroke-width="2"/>
  <text x="380" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">☁️ AWS VPC</text>

  <!-- Route 53 Inbound Endpoint -->
  <rect x="300" y="165" width="160" height="55" rx="6" fill="#fff3cd" stroke="#ff9500" stroke-width="1"/>
  <text x="380" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">Route 53</text>
  <text x="380" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">インバウンドエンドポイント</text>
  <text x="380" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">10.128.130.26</text>

  <!-- Arrow down -->
  <path d="M380 230 L380 250" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Route 53 Private Hosted Zone -->
  <rect x="300" y="260" width="160" height="55" rx="6" fill="#fff3cd" stroke="#ff9500" stroke-width="1"/>
  <text x="380" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">Route 53</text>
  <text x="380" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">プライベートホストゾーン</text>
  <text x="380" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">delegate-test.intra.example.com</text>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc3545"/>
    </marker>
  </defs>
</svg>
